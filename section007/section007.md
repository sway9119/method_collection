# ライブラリが意図通りに動かない原因について
## ロードッパス問題
ライブラリが、意図通りに動かない原因のひとつにロードパスの優先順位にまつわる問題がある。

### ロードパスの優先順位
ライブラリ探索の優先順位はロードパスの先頭にあるほど高くなる。
本来読み込まれるべきディレクトリより前にあるディレクトリにライブラリが見つかった場合、それが読み込まれてしまう。

### 既存ライブラリと同盟の自作ライブラリを作ってはいけない
標準のライブラリと同じ名前をつけない為に、ライブラリの存在をチェックするコマンドがある。

```
$ ruby -rライブラリ名 -e ''
=> ruby: no such file to load -- ライブラリ名(LoadError) 
```

### インストールしたライブラリと標準ライブラリが衝突

自作は判別がつくが、下記のケースで衝突する可能性がある。

- 自分の環境にはRuby 2.5.0がインストールしてある
- ライブラリXXXのバージョン0.9をインストールしてある
- （長い年月の末）Ruby 3.0.0をインストールする
- 3.0.0にはXXXのバージョンん1.0が標準添付されている

「require 'XXX'」をした場合、ロードパスの優先順位が高いXXX0.9が読み込まれてしまう。

→ ライブライのファイル名を知っておく必要がある